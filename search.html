<html>
  <head>
    <link rel="stylesheet" type="text/css" href="main.css">
    <link href='http://fonts.googleapis.com/css?family=Cherry+Swash' rel='stylesheet' type='text/css'>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="http://qrohlf.com/trianglify/trianglify.js"></script>
    <link rel="stylesheet" href="res/css/main.css">
    <link rel="stylesheet" href="buttons.css">
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <title>seekbar</title>
  </head>
  <body>
    <script>
    var t = new Trianglify();
    var pattern = t.generate(document.body.clientWidth, document.body.clientHeight);
    document.body.setAttribute('style', 'background-image: '+pattern.dataUrl);
    </script>
    <div class="box">
      <br><br><br><br><br><br><br><br>
      <ul id="products">
        
      </ul>
    </div>
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script type="text/javascript">
    // when we implement the button that chooses a product,
    // socket.emit('product', name);
    // socket.on('stores', function(stores) {
    //
    // });

    var socket = io();

    var q = getUrlVars()["q"];
    var zip = getUrlVars()["zip"];

    socket.emit("search", q, zip);

    socket.on('results', function(products) {
      for (var i = 0; i < products.length; i++) {
        $('#products').append("<li>" + products[i].name + "<img src='" + products[i].image + "'></li>");
      }
    });

    function getUrlVars() {
      var vars = {};
      var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,
      function(m,key,value) {
        vars[key] = value;
      });
      return vars;
    }
    </script>
  </body>
</html>
