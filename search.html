<html>
  <head>

  </head>
  <body>
    <ul id="products">

    </ul>
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script type="text/javascript">
    // when we implement the button that chooses a product,
    // socket.emit('product', name);
    // socket.on('stores', function(stores) {
    //
    // });

    var socket = io();

    var q = getUrlVars()["q"];
    var zip = getUrlVars()["zip"];

    socket.emit("search", q, zip);

    socket.on('results', function(products) {
      for (var i = 0; i < products.length; i++) {
        $('#products').append("<li>" + products[i].name + "<img src='" + products[i].image + "'></li>");
      }
    });

    function getUrlVars() {
      var vars = {};
      var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,
      function(m,key,value) {
        vars[key] = value;
      });
      return vars;
    }
    </script>
  </body>
</html>
